<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <script type="text/javascript">
        
        var a = [5,3,1,4,2];
        var b = [2,4,5,3,1];

        var tmp = [];
        var log = {};
        var lookup = {};
        for( var i = 0; i < a.length; i++ ) {
            lookup[ a[ i ] ] = i;
        }

        var fContinue = true;
        var index = 0;
        while( fContinue ) {
            tmp[ index ] = a[ index ];
            log[ a[index] ] = true;

            index = lookup[ b[ index ] ];
            if ( log[ a[index] ] !== undefined ) {
                fContinue = false;
            }
        }

        console.log( tmp );

        for( var i = 0; i < a.length; i++ ) {
            if ( tmp[ i ] === undefined ) {
                tmp[ i ] = b[ i ];
            }
        }

        console.log( tmp );
    </script>

</head>
<body>

</body>
</html>